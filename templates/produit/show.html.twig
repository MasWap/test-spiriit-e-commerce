{% extends 'base.html.twig' %}

{% block title %}{{ produit.nom }} - {{ 'site.title'|trans }}{% endblock %}

{% block body %}
<div class="container my-5">
    <!-- Breadcrumb (fil d'Ariane permettant de retourner à la page précédente) -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{{ path('app_accueil') }}" class="text-decoration-none">
                    <i class="fas fa-guitar me-1"></i>{{ 'breadcrumb.collection'|trans }}
                </a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">{{ produit.nom }}</li>
        </ol>
    </nav>

    <div class="row">
        <!-- Image du produit -->
        <div class="col-md-6">
            <div class="product-image-container bg-light rounded p-4 text-center" style="height: 500px;">
                {% if produit.photo %}
                    <img src="{{ '/images/products/' ~ produit.photo }}" alt="{{ produit.nom }}" class="img-fluid rounded" style="max-height: 100%; max-width: 100%; object-fit: contain;">
                {% else %}
                    <i class="fas fa-guitar text-secondary" style="font-size: 8rem; margin-top: 120px;"></i>
                {% endif %}
            </div>
        </div>

        <!-- Détails du produit -->
        <div class="col-md-6">
            
            <div class="d-flex justify-content-between align-items-start mb-3">
            <h1 class="display-6 fw-bold mb-3">{{ produit.nom }}</h1>
                <a href="{{ path('admin', {crudAction: 'edit', crudControllerFqcn: 'App\\Controller\\Admin\\ProduitCrudController', entityId: produit.id}) }}" 
                    class="btn btn-outline-primary btn-sm" title="{{ 'product.edit'|trans }} ({{ produit.nom }})">
                    <i class="fas fa-edit"></i>
                </a>
            </div>
            <!-- Prix -->
            <div class="price-section mb-4">
                <span class="h2 text-primary fw-bold">{{ produit.prix|number_format(2, ',', ' ') }} €</span>
                <div class="mt-2">
                    <span class="badge bg-secondary">
                        <i class="fas fa-truck me-1"></i>{{ 'product.free_shipping'|trans }} <small><i>{{ 'product.free_shipping_note'|trans }}</i></small>
                    </span>
                </div>
            </div>

            <!-- Description -->
            <div class="description-section mb-4">
                <h3 class="h5 mb-3">{{ 'product.description'|trans }}</h3>
                <p class="text-muted lh-lg">{{ produit.description }}</p>
            </div>

            <!-- Actions -->
            <div class="actions-section">
                <div class="row g-3">
                    <!-- Sélecteur de quantité et bouton ajout au panier -->
                    <div class="col-12">
                        <div class="d-flex gap-3 align-items-end">
                            <div style="flex: 0 0 130px;">
                                <label for="quantity" class="h5 mb-3">{{ 'product.quantity'|trans }}</label>
                                <div class="input-group">
                                    <!-- Bouton pour diminuer la quantité -->
                                    <button class="btn btn-outline-secondary" type="button" onclick="decreaseQuantity()">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" class="form-control text-center" id="quantity" value="1" min="1" max="50">
                                    <!-- Bouton pour augmenter la quantité -->
                                    <button class="btn btn-outline-secondary" type="button" onclick="increaseQuantity()">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div style="flex: 1;">
                                <!-- Bouton permettant l'ajout au panier de l'article en fonction de la quantité choisie -->
                                <form method="post" action="{{ path('app_panier_ajouter', {id: produit.id}) }}" class="w-100">
                                    <input type="hidden" name="quantite" id="hidden-quantite" value="1">
                                    <button type="submit" class="btn btn-primary btn-lg w-100">
                                        <i class="fas fa-cart-plus me-2"></i>{{ 'product.add_to_cart'|trans }}
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}
